# **Phi-3.5 ржХрзЗ Intel OpenVINO ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬ ржХрж░рж╛**

Intel рж╣рж▓рзЛ рж╕ржмржЪрзЗржпрж╝рзЗ ржРрждрж┐рж╣рзНржпржмрж╛рж╣рзА CPU ржирж┐рж░рзНржорж╛рждрж╛, ржпрж╛рж░ ржЕржирзЗржХ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж░ржпрж╝рзЗржЫрзЗред ржорзЗрж╢рж┐ржи рж▓рж╛рж░рзНржирж┐ржВ ржПржмржВ ржбрж┐ржк рж▓рж╛рж░рзНржирж┐ржВржпрж╝рзЗрж░ ржЙрждрзНржерж╛ржирзЗрж░ рж╕ржЩрзНржЧрзЗ, Intel AI ржЕрзНржпрж╛ржХрзНрж╕рж┐рж▓рж╛рж░рзЗрж╢ржирзЗрж░ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛ржпрж╝ ржпрзЛржЧ ржжрж┐ржпрж╝рзЗржЫрзЗред ржоржбрзЗрж▓ ржЗржиржлрж╛рж░рзЗржирзНрж╕рзЗрж░ ржЬржирзНржп, Intel рж╢рзБржзрзБржорж╛рждрзНрж░ GPU ржПржмржВ CPU ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж╛, ржмрж░ржВ NPU-ржУ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

ржЖржорж░рж╛ ржЪрж╛ржЗ Phi-3.x Family-ржХрзЗ ржПржирзНржб-рж╕рж╛ржЗржбрзЗ ржбрзЗржкрзНрж▓ржпрж╝ ржХрж░рждрзЗ, ржпрж╛рждрзЗ ржПржЯрж┐ AI PC ржПржмржВ Copilot PC-ржПрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЕржВрж╢ рж╣ржпрж╝рзЗ ржУржарзЗред ржПржирзНржб-рж╕рж╛ржЗржбрзЗ ржоржбрзЗрж▓ рж▓рзЛржб ржХрж░рж╛рж░ ржЬржирзНржп ржмрж┐ржнрж┐ржирзНржи рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржирж┐рж░рзНржорж╛рждрж╛рж░ рж╕рж╣ржпрзЛржЧрж┐рждрж╛ ржкрзНрж░ржпрж╝рзЛржЬржиред ржПржЗ ржЕржзрзНржпрж╛ржпрж╝ржЯрж┐ ржорзВрж▓ржд Intel OpenVINO-ржПрж░ ржПржХржЯрж┐ ржХрзЛржпрж╝рж╛ржирзНржЯрж┐ржЯрзЗржЯрж┐ржн ржоржбрзЗрж▓ рж╣рж┐рж╕рж╛ржмрзЗ ржкрзНрж░ржпрж╝рзЛржЧрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржоржирзЛржпрзЛржЧ ржжрзЗржпрж╝ред  


## **OpenVINO ржХрзА?**

OpenVINO рж╣рж▓рзЛ ржПржХржЯрж┐ ржУржкрзЗржи-рж╕рзЛрж░рзНрж╕ ржЯрзБрж▓ржХрж┐ржЯ, ржпрж╛ ржХрзНрж▓рж╛ржЙржб ржерзЗржХрзЗ ржПржЬ ржкрж░рзНржпржирзНржд ржбрж┐ржк рж▓рж╛рж░рзНржирж┐ржВ ржоржбрзЗрж▓ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржПржмржВ ржбрзЗржкрзНрж▓ржпрж╝ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржПржЯрж┐ ржЬрзЗржирж╛рж░рзЗржЯрж┐ржн AI, ржнрж┐ржбрж┐ржУ, ржЕржбрж┐ржУ ржПржмржВ ржнрж╛рж╖рж╛рж░ ржорждрзЛ ржмрж┐ржнрж┐ржирзНржи ржХрзНрж╖рзЗрждрзНрж░рзЗ ржбрж┐ржк рж▓рж╛рж░рзНржирж┐ржВ ржЗржиржлрж╛рж░рзЗржирзНрж╕ржХрзЗ рждрзНржмрж░рж╛ржирзНржмрж┐ржд ржХрж░рзЗред PyTorch, TensorFlow, ONNX ржПржмржВ ржЖрж░ржУ ржЕржирзЗржХ ржЬржиржкрзНрж░рж┐ржпрж╝ ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХрзЗрж░ ржоржбрзЗрж▓ржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ред ржоржбрзЗрж▓ рж░рзВржкрж╛ржирзНрждрж░ ржПржмржВ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржХрж░рзБржи, ржПржмржВ Intel┬о рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржПржмржВ ржкрж░рж┐ржмрзЗрж╢рзЗрж░ ржорж┐рж╢рзНрж░ржгрзЗ, ржЕржи-ржкрзНрж░рж┐ржорж╛ржЗрж╕ ржПржмржВ ржЕржи-ржбрж┐ржнрж╛ржЗрж╕, ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржмрж╛ ржХрзНрж▓рж╛ржЙржбрзЗ ржбрзЗржкрзНрж▓ржпрж╝ ржХрж░рзБржиред

ржПржЦржи OpenVINO-ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ, ржЖржкржирж┐ Intel рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░рзЗ GenAI ржоржбрзЗрж▓ ржжрзНрж░рзБржд ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржПржмржВ ржоржбрзЗрж▓ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ рждрзНржмрж░рж╛ржирзНржмрж┐ржд ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

ржмрж░рзНрждржорж╛ржирзЗ OpenVINO Phi-3.5-Vision ржПржмржВ Phi-3.5 Instruct-ржПрж░ ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬрзЗрж╢ржи ржХржиржнрж╛рж░рзНрж╕ржи рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗред  


### **ржкрж░рж┐ржмрзЗрж╢ рж╕рзЗржЯржЖржк**

ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржкрж░рж┐ржмрзЗрж╢ ржирж┐рж░рзНржнрж░рждрж╛ржЧрзБрж▓рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ ржЖржЫрзЗ, ржПржЯрж┐ рж╣рж▓рзЛ requirement.txt  

```txt

--extra-index-url https://download.pytorch.org/whl/cpu
optimum-intel>=1.18.2
nncf>=2.11.0
openvino>=2024.3.0
transformers>=4.40
openvino-genai>=2024.3.0.0

```  


### **OpenVINO ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Phi-3.5-Instruct ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬ ржХрж░рж╛**

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ, ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржПржЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯржЯрж┐ ржЪрж╛рж▓рж╛ржи  

```bash


export llm_model_id = "microsoft/Phi-3.5-mini-instruct"

export llm_model_path = "your save quantizing Phi-3.5-instruct location"

optimum-cli export openvino --model {llm_model_id} --task text-generation-with-past --weight-format int4 --group-size 128 --ratio 0.6  --sym  --trust-remote-code {llm_model_path}


```  


### **OpenVINO ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Phi-3.5-Vision ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬ ржХрж░рж╛**

Python ржмрж╛ Jupyter рж▓рзНржпрж╛ржмрзЗ ржПржЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯржЯрж┐ ржЪрж╛рж▓рж╛ржи  

```python

import requests
from pathlib import Path
from ov_phi3_vision import convert_phi3_model
import nncf

if not Path("ov_phi3_vision.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/notebooks/phi-3-vision/ov_phi3_vision.py")
    open("ov_phi3_vision.py", "w").write(r.text)


if not Path("gradio_helper.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/notebooks/phi-3-vision/gradio_helper.py")
    open("gradio_helper.py", "w").write(r.text)

if not Path("notebook_utils.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/utils/notebook_utils.py")
    open("notebook_utils.py", "w").write(r.text)



model_id = "microsoft/Phi-3.5-vision-instruct"
out_dir = Path("../model/phi-3.5-vision-128k-instruct-ov")
compression_configuration = {
    "mode": nncf.CompressWeightsMode.INT4_SYM,
    "group_size": 64,
    "ratio": 0.6,
}
if not out_dir.exists():
    convert_phi3_model(model_id, out_dir, compression_configuration)

```  


### **ЁЯдЦ Intel OpenVINO рж╕рж╣ Phi-3.5-ржПрж░ ржЬржирзНржп ржиржорзБржирж╛**

| рж▓рзНржпрж╛ржм    | ржкрж░рж┐ржЪрж┐рждрж┐ | ржпрж╛ржи |
| -------- | ------- |  ------- |
| ЁЯЪА Lab-Introduce Phi-3.5 Instruct  | ржЖржкржирж╛рж░ AI PC-рждрзЗ Phi-3.5 Instruct ржХрзАржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи рждрж╛ рж╢рж┐ржЦрзБржи    |  [Go](../../../../../code/09.UpdateSamples/Aug/intel-phi35-instruct-zh.ipynb)    |
| ЁЯЪА Lab-Introduce Phi-3.5 Vision (image) | ржЖржкржирж╛рж░ AI PC-рждрзЗ Phi-3.5 Vision ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзАржнрж╛ржмрзЗ ржЗржорзЗржЬ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░ржмрзЗржи рждрж╛ рж╢рж┐ржЦрзБржи      |  [Go](../../../../../code/09.UpdateSamples/Aug/intel-phi35-vision-img.ipynb)    |
| ЁЯЪА Lab-Introduce Phi-3.5 Vision (video)   | ржЖржкржирж╛рж░ AI PC-рждрзЗ Phi-3.5 Vision ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзАржнрж╛ржмрзЗ ржнрж┐ржбрж┐ржУ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░ржмрзЗржи рждрж╛ рж╢рж┐ржЦрзБржи    |  [Go](../../../../../code/09.UpdateSamples/Aug/intel-phi35-vision-video.ipynb)    |  


## **рж░рж┐рж╕рзЛрж░рзНрж╕**

1. Intel OpenVINO рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж░ржУ ржЬрж╛ржирзБржи [https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/overview.html](https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/overview.html)

2. Intel OpenVINO GitHub рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐ [https://github.com/openvinotoolkit/openvino.genai](https://github.com/openvinotoolkit/openvino.genai)

**ржЕрж╕рзНржмрзАржХрзГрждрж┐**:  
ржПржЗ ржиржерж┐ ржорзЗрж╢рж┐ржи-ржнрж┐рждрзНрждрж┐ржХ ржПржЖржЗ ржЕржирзБржмрж╛ржж рж╕рзЗржмрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЕржирзВржжрж┐ржд рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ ржпржерж╛рж╕ржорзНржнржм ржирж┐рж░рзНржнрзБрж▓рждрж╛рж░ ржЬржирзНржп ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рждржмрзЗ ржжржпрж╝рж╛ ржХрж░рзЗ ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржмрж╛ржжрзЗ ржнрзБрж▓ ржмрж╛ ржЕрж╕ржЩрзНржЧрждрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржиржерж┐рж░ ржорзВрж▓ ржнрж╛рж╖рж╛ржпрж╝ рж▓рзЗржЦрж╛ ржЖрж╕рж▓ рж╕ржВрж╕рзНржХрж░ржгржЯрж┐ржХрзЗ ржкрзНрж░рж╛ржорж╛ржгрзНржп ржЙрзОрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржпрзЗрж░ ржЬржирзНржп ржкрзЗрж╢рж╛ржжрж╛рж░ ржорж╛ржиржм ржЕржирзБржмрж╛ржжрзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржЕржирзБржмрж╛ржж ржмрзНржпржмрж╣рж╛рж░ ржерзЗржХрзЗ ржЙржжрзНржнрзВржд ржпрзЗ ржХрзЛржирзЛ ржнрзБрж▓ ржмрзЛржЭрж╛ржмрзБржЭрж┐ ржмрж╛ ржнрзБрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛рж░ ржЬржирзНржп ржЖржорж░рж╛ ржжрж╛ржпрж╝рзА ржиржЗред