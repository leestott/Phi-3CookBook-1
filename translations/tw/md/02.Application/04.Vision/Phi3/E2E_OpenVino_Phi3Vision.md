這個範例展示了如何使用預訓練模型，根據圖像和文字提示生成 Python 程式碼。

[範例程式碼](../../../../../../code/06.E2E/E2E_OpenVino_Phi3-vision.ipynb)

以下是逐步解釋：

1. **導入與設置**：
   - 導入必要的函式庫和模組，包括用於圖像處理的 `requests` 和 `PIL`，以及用於處理模型的 `transformers`。

2. **載入並顯示圖像**：
   - 使用 `PIL` 函式庫打開圖像檔案 (`demo.png`) 並顯示。

3. **定義提示**：
   - 建立一個訊息，其中包含圖像以及生成處理該圖像並使用 `plt` (matplotlib) 儲存的 Python 程式碼的請求。

4. **載入處理器**：
   - 從由 `out_dir` 指定的預訓練模型中載入 `AutoProcessor`。這個處理器負責處理文字和圖像輸入。

5. **建立提示**：
   - 使用 `apply_chat_template` 方法將訊息格式化為適合模型的提示。

6. **處理輸入**：
   - 將提示和圖像處理為模型可以理解的張量。

7. **設定生成參數**：
   - 定義模型生成過程的參數，包括生成的新 tokens 最大數量以及是否採用取樣方式輸出。

8. **生成程式碼**：
   - 模型根據輸入和生成參數生成 Python 程式碼。使用 `TextStreamer` 處理輸出，略過提示和特殊 tokens。

9. **輸出**：
   - 打印生成的程式碼，應包含用於處理圖像並按照提示儲存的 Python 程式碼。

這個範例說明了如何利用 OpenVino 的預訓練模型，根據使用者輸入和圖像動態生成程式碼。

**免責聲明**：  
本文件是使用機器翻譯服務生成的。我們致力於提供準確的翻譯，但請注意，自動翻譯可能包含錯誤或不準確之處。應以原始語言的文件作為權威來源。對於關鍵信息，建議尋求專業人工翻譯。我們對因使用本翻譯而引起的任何誤解或錯誤解讀概不負責。