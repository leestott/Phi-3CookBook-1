Phi-3-mini WebGPU RAG チャットボット

## WebGPUとRAGパターンのデモ
Phi-3 Onnx Hostedモデルを使用したRAGパターンは、情報検索を活用した生成（Retrieval-Augmented Generation）アプローチを採用しており、Phi-3モデルの性能とONNXホスティングを組み合わせることで、効率的なAIデプロイメントを実現します。このパターンは、ドメイン固有のタスク向けにモデルを微調整する際に役立ち、高品質、コスト効率、長文コンテキスト理解のバランスを提供します。Azure AIのスイートの一部として、多様な業界のカスタマイズニーズに応えるため、見つけやすく、試しやすく、使いやすい幅広いモデルを提供します。Phi-3モデル（Phi-3-mini、Phi-3-small、Phi-3-mediumを含む）はAzure AI Model Catalogで利用可能で、自己管理やHuggingFace、ONNXなどのプラットフォームを通じて微調整およびデプロイ可能です。これにより、Microsoftはアクセスしやすく効率的なAIソリューションを提供する姿勢を示しています。

## WebGPUとは
WebGPUは、最新のウェブグラフィックスAPIで、ウェブブラウザからデバイスのグラフィックスプロセッシングユニット（GPU）に効率的にアクセスすることを目的としています。これはWebGLの後継として設計されており、いくつかの重要な改善点を提供します：

1. **最新GPUとの互換性**: WebGPUは、Vulkan、Metal、Direct3D 12などのシステムAPIを活用し、現代的なGPUアーキテクチャとシームレスに動作するよう設計されています。
2. **パフォーマンスの向上**: 一般的なGPU計算や高速な操作をサポートし、グラフィックスレンダリングや機械学習タスクに適しています。
3. **高度な機能**: WebGPUは、より高度なGPU機能にアクセスできるため、より複雑で動的なグラフィックスや計算作業が可能です。
4. **JavaScriptの負荷軽減**: GPUに多くのタスクをオフロードすることで、JavaScriptの負荷を大幅に軽減し、パフォーマンスの向上とスムーズな体験を実現します。

WebGPUは現在、Google Chromeなどのブラウザでサポートされており、他のプラットフォームへの対応拡大が進行中です。

### 03.WebGPU
必要な環境：

**対応ブラウザ:** 
- Google Chrome 113+
- Microsoft Edge 113+
- Safari 18 (macOS 15)
- Firefox Nightly

### WebGPUの有効化:

- Chrome/Microsoft Edgeの場合 

`chrome://flags/#enable-unsafe-webgpu` フラグを有効にします。

#### ブラウザを開く:
Google ChromeまたはMicrosoft Edgeを起動します。

#### フラグページにアクセス:
アドレスバーに `chrome://flags` と入力し、Enterキーを押します。

#### フラグを検索:
ページ上部の検索ボックスに 'enable-unsafe-webgpu' と入力します。

#### フラグを有効化:
検索結果に表示される #enable-unsafe-webgpu フラグを見つけます。

その横にあるドロップダウンメニューをクリックし、「有効」を選択します。

#### ブラウザを再起動:
フラグを有効化した後、変更を反映させるためにブラウザを再起動する必要があります。ページ下部に表示される「再起動」ボタンをクリックしてください。

- Linuxの場合は、ブラウザを `--enable-features=Vulkan` で起動します。
- Safari 18 (macOS 15) では、WebGPUがデフォルトで有効になっています。
- Firefox Nightlyでは、アドレスバーに about:config を入力し、`set dom.webgpu.enabled to true` を実行します。

### Microsoft EdgeでGPUを設定する方法

WindowsでMicrosoft Edgeに高性能GPUを設定する手順は以下の通りです：

- **設定を開く:** スタートメニューをクリックし、「設定」を選択します。
- **システム設定:** 「システム」から「ディスプレイ」に進みます。
- **グラフィックス設定:** 下にスクロールし、「グラフィックス設定」をクリックします。
- **アプリの選択:** 「設定を指定するアプリを選択」の下で「デスクトップアプリ」を選択し、「参照」をクリックします。
- **Edgeを選択:** Edgeのインストールフォルダ（通常 `C:\Program Files (x86)\Microsoft\Edge\Application`）に移動し、`msedge.exe` を選択します。
- **優先設定を設定:** 「オプション」をクリックし、「高パフォーマンス」を選択して「保存」をクリックします。
これにより、Microsoft Edgeが高性能GPUを使用してパフォーマンスを向上させます。
- **再起動:** 設定を反映させるために、コンピュータを再起動してください。

### コードスペースを開く:
GitHubのリポジトリに移動します。
「Code」ボタンをクリックし、「Open with Codespaces」を選択します。

まだコードスペースを作成していない場合は、「New codespace」をクリックして作成できます。

**注意**: コードスペースでのNode環境のインストール
GitHub Codespaceでnpmデモを実行するのは、プロジェクトをテストおよび開発するのに最適な方法です。以下は、始めるためのステップバイステップガイドです：

### 環境のセットアップ:
コードスペースを開いたら、Node.jsとnpmがインストールされていることを確認してください。以下を実行して確認できます：
```
node -v
```
```
npm -v
```

インストールされていない場合は、以下を使用してインストールできます：
```
sudo apt-get update
```
```
sudo apt-get install nodejs npm
```

### プロジェクトディレクトリに移動:
ターミナルを使用してnpmプロジェクトがあるディレクトリに移動します：
```
cd path/to/your/project
```

### 依存関係をインストール:
以下のコマンドを実行して、package.jsonファイルに記載されている必要な依存関係をすべてインストールします：

```
npm install
```

### デモを実行:
依存関係がインストールされたら、デモスクリプトを実行できます。これは通常、package.jsonのscriptsセクションに指定されています。例えば、デモスクリプトがstartという名前の場合、以下を実行します：

```
npm run build
```
```
npm run dev
```

### デモにアクセス:
デモがウェブサーバーを伴う場合、CodespacesはアクセスするためのURLを提供します。通知を確認するか、「Ports」タブでURLを探してください。

**注意:** モデルはブラウザ内にキャッシュされる必要があるため、読み込みに時間がかかる場合があります。

### RAGデモ
Markdownファイル `intro_rag.md` to complete the RAG solution. If using codespaces you can download the file located in `01.InferencePhi3/docs/` をアップロードします。

### ファイルを選択:
「Choose File」と書かれたボタンをクリックし、アップロードしたいドキュメントを選択します。

### ドキュメントをアップロード:
ファイルを選択したら、「Upload」ボタンをクリックして、RAG（情報検索を活用した生成）用にドキュメントを読み込みます。

### チャットを開始:
ドキュメントがアップロードされたら、その内容に基づいてRAGを使用したチャットセッションを開始できます。

**免責事項**:  
この文書は、AIによる機械翻訳サービスを使用して翻訳されています。正確さを追求しておりますが、自動翻訳には誤りや不正確さが含まれる場合があります。元の言語で作成された原文が公式であり、信頼できる情報源と見なされるべきです。重要な情報については、専門の人間翻訳者による翻訳をお勧めします。この翻訳の使用に起因する誤解や誤認について、当方は一切の責任を負いかねます。